# 🛍️ resell-shop

---

> 이 프로젝트는 지속 성장 가능한 소프트웨어를 만들기 위한 방법을 고민하며 개발되었습니다.

<br>

## Layer

---

### Presentation

- 외부의 요청과 응답을 처리하는 영역입니다.

### Service

- 비지니스 로직을 처리하는 영역입니다. 서비스는 상세 구현을 드러내기 보다는 비지니스의 흐름을 나열합니다.
- 실제 비지니스 로직을 처리하기 위한 상세 구현을 갖춘 도구(Reader, Writer와 같은)들을 포함합니다. 여러 구현 로직들을 처리하기 때문에 재사용성이 높은 영역입니다.

### DataAccess

- 상세 구현 로직이 다양한 자원에 접근할 수 있는 기능을 제공하는 영역입니다. 예를 들어 DB 접근 기능을 제공합니다.

### Domain

- 시스템이 해결하고자 하는 비지니스 로직을 모델링하는 영역입니다.

<br>

## 요구사항

---

### 상품

- 상품 목록 조회
    - [x] 상품 목록을 조회할 수 있다.
    - [x] 상품 카테고리별로 검색할 수 있다.
    - [x] 브랜드로 검색할 수 있다.
    - [x] 한글 상품명으로 검색할 수 있다.

- 상품 조회
    - [x] 상품을 조회할 수 있다.
    - [x] 존재하지 않는 상품을 조회할 수 없다.

<br>

### 입찰

- 입찰 등록
    - [x] 입찰(구매/판매)을 등록할 수 있다.
    - [x] 같은 사이즈의 상품에 중복 입찰을 등록할 수 없다.
    - [x] 입찰 가격은 0보다 커야 한다.

- 가장 낮은 입찰가 조회
    - [x] 상품에 등록된 가장 낮은 입찰가를 사이즈별로 조회할 수 있다.

- 입찰가 변경
    - [x] 등록한 입찰가를 변경할 수 있다.
    - [x] 입찰 가격은 0보다 커야 한다.

- 입찰 삭제
    - [x] 입찰을 삭제할 수 있다.
    - [x] 존재하지 않는 입찰을 삭제할 수 없다.

<br>

### 카테고리

- 카테고리 목록 조회
    - [x] 카테고리 목록을 조회할 수 있다.

- 하위 카테고리 조회
    - [x] 카테고리의 하위 카테고리들을 조회할 수 있다.

<br>

### 주문

- 주문 목록 조회
    - [x] 주문 목록을 조회할 수 있다.
    - [x] 주문 번호로 검색할 수 있다.
    - [x] 주문 상태로 검색할 수 있다.
    - [x] 판매자 아이디로 검색할 수 있다.
    - [x] 구매자 아이디로 검색할 수 있다.
    - [x] 기간으로 검색할 수 있다.

- 주문 등록
    - [x] 주문을 등록할 수 있다.
    - [x] 주문이 등록되면 연관된 입찰 내역의 상태를 변경한다.

- 주문 조회
    - [x] 주문을 조회할 수 있다.
    - [x] 존재하지 않는 주문을 조회할 수 없다.

- 주문 취소
    - [x] 주문을 취소할 수 있다.
    - [x] 주문 상태가 CREATED, INSPECTION_FAILED가 아니면 취소할 수 없다.
    - [x] 주문이 취소되면 연관된 입찰 내역의 상태를 변경한다.

<br>

## 도메인 명세

---

### 상품 (Product)

| 필드           | 설명                |
|--------------|-------------------|
| id           | 고유 식별자            |
| categoryId   | 카테고리 아이디          |
| brand        | 브랜드 (나이키, 뉴발란스 등) |
| nameEn       | 영문 상품명            |
| nameKo       | 한글 상품명            |
| releasePrice | 출시가               |
| modelNumber  | 상품번호              |
| releaseDate  | 출시일               |
| option       | 옵션                |
| description  | 매장 성명             |
| foodOrigin   | 원산지               |
| phoneNumber  | 매장 연락처            |

<br>

### 상품 이미지 (ProductImage)

| 필드        | 설명      |
|-----------|---------|
| id        | 고유 식별자  |
| productId | 상품 아이디  |
| imageUrl  | 이미지 URL |

<br>

### 상품 사이즈 (ProductSize)

| 필드        | 설명     |
|-----------|--------|
| id        | 고유 식별자 |
| productId | 상품 아이디 |
| size      | 사이즈    |

<br>

### 입찰 (Bid)

| 필드            | 설명                         |
|---------------|----------------------------|
| id            | 고유 식별자                     |
| type          | 타입 (판매자, 구매자)              |
| status        | 상태 (대기 중, 입찰 중, 입찰 성공, 취소) |
| orderNumber   | 주문 번호                      |
| userId        | 회원 아이디                     |
| productId     | 상품 아이디                     |
| productSizeId | 상품 사이즈 아이디                 |
| price         | 입찰가                        |
| createdAt     | 등록일                        |

<br>

### 입찰 히스토리 (BidHistory)

| 필드        | 설명                         |
|-----------|----------------------------|
| id        | 고유 식별자                     |
| bidId     | 입찰 아이디                     |
| type      | 타입 (판매자, 구매자)              |
| status    | 상태 (대기 중, 입찰 중, 입찰 성공, 취소) |
| userId    | 회원 아이디                     |
| createdAt | 생성일                        |

<br>

### 카테고리 (Category)

| 필드           | 설명               |
|--------------|------------------|
| id           | 고유 식별자           |
| parentId     | 상위 카테고리 아이디      |
| name         | 카테고리명            |
| iconImageUrl | 카테고리 아이콘 이미지 URL |
| children     | 하위 카테고리 아이디      |

<br>

### 주문 (Order)

| 필드           | 설명                     |
|--------------|------------------------|
| id           | 고유 식별자                 |
| status       | 상태 (주문 생성, 판매자 배송 중 등) |
| orderNumber  | 주문 번호                  |
| sellerId     | 판매자 아이디                |
| buyerId      | 구매자 아이디                |
| bidId        | 입찰 아이디                 |
| commission   | 수수료                    |
| deliveryFee  | 배송비                    |
| productPrice | 상품 가격                  |
| totalPrice   | 총 금액                   |
| createdAt    | 생성일                    |

<br>

### 주문 히스토리 (OrderHistory)

| 필드        | 설명                     |
|-----------|------------------------|
| id        | 고유 식별자                 |
| orderId   | 주문 아이디                 |
| status    | 상태 (주문 생성, 판매자 배송 중 등) |
| sellerId  | 판매자 아이디                |
| buyerId   | 구매자 아이디                |
| createdAt | 생성일                    |

<br>

## Reference

---

[지속 성장 가능한 소프트웨어를 만들어가는 방법. Gemini Kim](https://geminikims.medium.com/%EC%A7%80%EC%86%8D-%EC%84%B1%EC%9E%A5-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EA%B0%80%EB%8A%94-%EB%B0%A9%EB%B2%95-97844c5dab63)

